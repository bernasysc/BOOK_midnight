<!DOCTYPE html>
<html>
<head>
    <title>{{ list.name }} - Bookify</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>

    <!-- Flash messages -->
    {% with messages = get_flashed_messages(with_categories=true) %}
      {% if messages %}
        <div class="flash-messages">
          {% for category, message in messages %}
            <div class="flash {{ category }}">{{ message }}</div>
          {% endfor %}
        </div>
      {% endif %}
    {% endwith %}

    <h1>{{ list.name }}</h1>

    <!-- Navigation links -->
    <div class="user-links">
        {% if session.username %}
            Logged in as {{ session.username }} |
            <a href="{{ url_for('home') }}">Home</a> |
            <a href="{{ url_for('my_lists') }}">My Lists</a> |
            <a href="{{ url_for('logout') }}">Logout</a>
        {% else %}
            <a href="{{ url_for('login') }}">Login</a> |
            <a href="{{ url_for('register') }}">Register</a>
        {% endif %}
    </div>

    <!-- List Info -->
    {% if list.description %}
    <div class="list-info">
        <p><strong>Description:</strong> {{ list.description }}</p>
    </div>
    {% endif %}

    <!-- Books in this list -->
    <div class="book-list">
        {% if books %}
            {% for book in books %}
                <div class="book-card">
                    <a href="{{ url_for('book_detail', book_id=book.id) }}" class="book-link">
                        <img src="{{ book.image_url if book.image_url else url_for('static', filename='no_image.png') }}" 
                             alt="{{ book.title }}" 
                             class="book-image">
                        <h3>{{ book.title }}</h3>
                        <p>{{ book.authors }}</p>
                    </a>

                    <!-- Remove from list button -->
                    <a href="{{ url_for('remove_from_custom_list', book_id=book.id, list_id=list.id) }}" class="fav-btn">‚ùå Remove</a>
                </div>
            {% endfor %}
        {% else %}
            <p>No books in this list yet. <a href="{{ url_for('home') }}">Browse books</a> and add them!</p>
        {% endif %}
    </div>

</body>
</html>
